rm(list = ls(pattern = "^tib_ProVisio"))
rm(work_data)
rm(file_names)
rm(i)
# Filter data and select relevant columns, excluding "Disruptive_Person" only for the total fixations
df_aoi_filtered <- df_aoi %>%
filter(TOI == "Lesson") %>%
select(
Group,
Participant,
Duration_of_interval,
starts_with("Number_of_fixations")
)
# Add a new AOI 'Students' by summing fixations for Anna, Bianca, and Carl(a)
df_aoi_filtered <- df_aoi_filtered %>%
mutate(
Number_of_fixations.Students =
`Number_of_fixations.Anna` +
`Number_of_fixations.Bianca` +
`Number_of_fixations.Carl(a)`,
# Calculate Total Fixations for all AOIs, excluding "Disruptive_Person"
Total_fixations_all = sum(c_across(starts_with("Number_of_fixations"))[!names(c_across(starts_with("Number_of_fixations"))) == "Number_of_fixations.Disruptive_Person"], na.rm = TRUE)
)
# Convert duration to minutes and calculate fixations per minute
df_aoi_filtered <- df_aoi_filtered %>%
mutate(Duration_of_interval_min = Duration_of_interval / 60000)
df_aoi_long <- df_aoi_filtered %>%
rowwise() %>%
mutate(
across(starts_with("Number_of_fixations"), ~ .x / Duration_of_interval_min, .names = "fixation_per_min_{.col}")
) %>%
ungroup() %>%
pivot_longer(
cols = starts_with("fixation_per_min_Number_of_fixations"),
names_to = "AOI",
values_to = "Fixations_per_minute"
) %>%
mutate(AOI = str_remove(AOI, "fixation_per_min_Number_of_fixations.")) %>%
mutate(AOI = factor(AOI, levels = c("All", "Students", "Anna", "Bianca", "Carl(a)", "Disruptive_Person",
"Board_Screen", "Material_Teacher", "Material_Students",
"Classroom_Others", "Nametag_Anna", "Nametag_Bianca", "Nametag_Carl(a)"))) %>%
arrange(AOI)
# Summarize descriptives
aois_descriptives_fixations <- df_aoi_long %>%
group_by(Group, AOI) %>%
summarise(
N = n(),
M = round(mean(Fixations_per_minute, na.rm = TRUE), 2),
SD = round(sd(Fixations_per_minute, na.rm = TRUE), 2),
Min = round(min(Fixations_per_minute, na.rm = TRUE), 2),
Max = round(max(Fixations_per_minute, na.rm = TRUE), 2)
)
knitr::kable(nof.table,
caption = "N, M, SD, min & max number of fixation per minute (across all AOIs)")
# return a character vector with names of .tsv data in data folder
file_names <- list.files(path = "data",
pattern = "interval_complete.tsv")
# read every object names in file_names and save it as a tibble
for (i in file_names) {
work_data <-
read_tsv(file = paste0("data/", i),
locale = locale(decimal_mark = ",")) %>%
dplyr::select(Group,
Participant,
TOI,
Duration_of_interval,
Start_of_interval,
starts_with("Total_duration_of_fixations"),
starts_with("Average_duration_of_fixations"),
starts_with("Number_of_fixations"),
starts_with("Time_to_first_fixation")
)
assign(value = work_data,
x = str_remove(paste0("tib_", i),
pattern = ".tsv"))
}
# bind every tibble that contains "interval_complete" to a new tible
df_aoi <-
mget(ls(pattern = "interval_complete")) %>%
bind_rows()
# extract only participants ID number
df_aoi$Participant <- as.numeric(
str_extract(df_aoi$Participant,
"\\d{3}")
)
# exclude invalid participants
df_aoi <- df_aoi %>%
filter(!Participant == 223)
# remove temporary data for a cleaner workspace
rm(list = ls(pattern = "^tib_ProVisio"))
rm(work_data)
rm(file_names)
rm(i)
# Filter data and select relevant columns, excluding "Disruptive_Person" only for the total fixations
df_aoi_filtered <- df_aoi %>%
filter(TOI == "Lesson") %>%
select(
Group,
Participant,
Duration_of_interval,
starts_with("Number_of_fixations")
)
# Add a new AOI 'Students' by summing fixations for Anna, Bianca, and Carl(a)
df_aoi_filtered <- df_aoi_filtered %>%
mutate(
Number_of_fixations.Students =
`Number_of_fixations.Anna` +
`Number_of_fixations.Bianca` +
`Number_of_fixations.Carl(a)`,
# Calculate Total Fixations for all AOIs, excluding "Disruptive_Person"
Total_fixations_all = sum(c_across(starts_with("Number_of_fixations"))[!names(c_across(starts_with("Number_of_fixations"))) == "Number_of_fixations.Disruptive_Person"], na.rm = TRUE)
)
# Convert duration to minutes and calculate fixations per minute
df_aoi_filtered <- df_aoi_filtered %>%
mutate(Duration_of_interval_min = Duration_of_interval / 60000)
df_aoi_long <- df_aoi_filtered %>%
rowwise() %>%
mutate(
across(starts_with("Number_of_fixations"), ~ .x / Duration_of_interval_min, .names = "fixation_per_min_{.col}")
) %>%
ungroup() %>%
pivot_longer(
cols = starts_with("fixation_per_min_Number_of_fixations"),
names_to = "AOI",
values_to = "Fixations_per_minute"
) %>%
mutate(AOI = str_remove(AOI, "fixation_per_min_Number_of_fixations.")) %>%
mutate(AOI = factor(AOI, levels = c("All", "Students", "Anna", "Bianca", "Carl(a)", "Disruptive_Person",
"Board_Screen", "Material_Teacher", "Material_Students",
"Classroom_Others", "Nametag_Anna", "Nametag_Bianca", "Nametag_Carl(a)"))) %>%
arrange(AOI)
# Summarize descriptives
aois_descriptives_fixations <- df_aoi_long %>%
group_by(Group, AOI) %>%
summarise(
N = n(),
M = round(mean(Fixations_per_minute, na.rm = TRUE), 2),
SD = round(sd(Fixations_per_minute, na.rm = TRUE), 2),
Min = round(min(Fixations_per_minute, na.rm = TRUE), 2),
Max = round(max(Fixations_per_minute, na.rm = TRUE), 2)
)
knitr::kable(nof.table,
caption = "N, M, SD, min & max number of fixation per minute (across all AOIs)")
knitr::kable(aois_descriptives_fixations,
caption = "N, M, SD, min & max number of fixation per minute (across all AOIs)")
##################### NUMBER OF FIXATION IN MICRO-TEACHING UNIT ########################
# filter group, participants, total duration & number fixation (micro-teaching unit)
df_aoi %>%
filter(TOI == "Lesson") %>%
dplyr::select (
Group,
Participant,
Duration_of_interval,
starts_with("Total_duration_of_fixations"),
starts_with("Number_of_fixations"),
starts_with("Average_duration"),
!"Total_duration_of_fixations.Disruptive_Person",
!"Number_of_fixations.Disruptive_Person",
!"Average_duration_of_fixations.Disruptive_Person"
) %>%
rowwise() %>%
transmute(
Group = Group,
Participant = Participant,
Duration_of_interval = Duration_of_interval,
Duration_of_interval_min = round(Duration_of_interval/60000, digits = 2),
Duration_of_interval_sec = round(Duration_of_interval/1000, digits = 2),
Sum_duration_fixation = sum(c_across(starts_with("Total_duration")), na.rm = TRUE),
Sum_average_duration_fixation = sum(c_across(starts_with("Average_duration")), na.rm = TRUE),
Sum_number_fixation = sum(c_across(starts_with("Number_of")), na.rm = TRUE),
Average_duration_mtu = round(Sum_duration_fixation / Sum_number_fixation, digits = 0),
Number_fixation_msec_mtu = round(Sum_number_fixation / Duration_of_interval, digits = 6),
Number_fixation_sec_mtu = round(Sum_number_fixation / Duration_of_interval_sec, digits = 2),
Number_fixation_min_mtu = round(Sum_number_fixation / Duration_of_interval_min, digits = 0),
Group = as_factor(Group)
) %>%
drop_na() -> df_aoi_sum
# N, M, SD, min & max number of fixation per minute (micro-teaching unit)
nof.table <-
df_aoi_sum %>%
group_by(Group) %>%
summarise(
N = n(),
"M" = round(mean(Number_fixation_min_mtu), digits = 2),
"SD" = round(sd(Number_fixation_min_mtu), digits = 2),
"Min" = round(min(Number_fixation_min_mtu), digits = 2),
"Max" = round(max(Number_fixation_min_mtu), digits = 2)
)
knitr::kable(nof.table,
caption = "N, M, SD, min & max number of fixation per minute (micro-teaching unit)")
# plotting number of fixations (micro-teaching unit)
df_aoi_sum %>%
ggplot(mapping = aes(x = Group, y = Number_fixation_min_mtu)) +
geom_boxplot(mapping = aes(fill = Group), outlier.shape = NA) +
geom_point(
size = 2,
alpha = 0.7,
position = position_jitter(
seed = 1,
width = 0.1,
height = 0.1
)
) +
ylim(0, 150) +
labs(x = "", y = "Number of fixations per minute") +
scale_fill_brewer(palette  = "RdBu") +
ggtitle("Number of fixations per minute\n(micro-teaching unit)") +
theme_cowplot() +
theme(legend.position = "none") -> plot_number_group
plot_number_group
# Visualization: Boxplot for fixations per minute across AOIs
ggplot(df_aoi_long, aes(x = AOI, y = Fixations_per_minute, fill = Group)) +
geom_boxplot(outlier.shape = NA) +
geom_jitter(
position = position_jitterdodge(jitter.width = 0.15),
size = 1.5,
alpha = 0.7
) +
scale_fill_brewer(palette = "RdBu") +
labs(x = "AOI", y = "Number of fixations per minute") +
ggtitle("Fixations per minute across all AOIs") +
theme_minimal() +
theme(legend.position = "top", axis.text.x = element_text(angle = 45, hjust = 1))
# filter group, participants, total duration & number fixation (micro-teaching unit)
df_aoi %>%
filter(TOI == "Lesson") %>%
dplyr::select (
Group,
Participant,
Duration_of_interval,
starts_with("Total_duration_of_fixations"),
starts_with("Number_of_fixations"),
starts_with("Average_duration"),
!"Total_duration_of_fixations.Disruptive_Person",
!"Number_of_fixations.Disruptive_Person",
!"Average_duration_of_fixations.Disruptive_Person"
) %>%
rowwise() %>%
transmute(
Group = Group,
Participant = Participant,
Duration_of_interval = Duration_of_interval,
Duration_of_interval_min = round(Duration_of_interval/60000, digits = 2),
Duration_of_interval_sec = round(Duration_of_interval/1000, digits = 2),
Sum_duration_fixation = sum(c_across(starts_with("Total_duration")), na.rm = TRUE),
Sum_average_duration_fixation = sum(c_across(starts_with("Average_duration")), na.rm = TRUE),
Sum_number_fixation = sum(c_across(starts_with("Number_of")), na.rm = TRUE),
Average_duration_mtu = round(Sum_duration_fixation / Sum_number_fixation, digits = 0),
Number_fixation_msec_mtu = round(Sum_number_fixation / Duration_of_interval, digits = 6),
Number_fixation_sec_mtu = round(Sum_number_fixation / Duration_of_interval_sec, digits = 2),
Number_fixation_min_mtu = round(Sum_number_fixation / Duration_of_interval_min, digits = 0),
Group = as_factor(Group)
) %>%
drop_na() -> df_aoi_sum
# N, M, SD, min & max number of fixation per minute (micro-teaching unit)
nof.table <-
df_aoi_sum %>%
group_by(Group) %>%
summarise(
N = n(),
"M" = round(mean(Number_fixation_min_mtu), digits = 2),
"SD" = round(sd(Number_fixation_min_mtu), digits = 2),
"Min" = round(min(Number_fixation_min_mtu), digits = 2),
"Max" = round(max(Number_fixation_min_mtu), digits = 2)
)
knitr::kable(nof.table,
caption = "N, M, SD, min & max number of fixation per minute (micro-teaching unit)")
# plotting number of fixations (micro-teaching unit)
df_aoi_sum %>%
ggplot(mapping = aes(x = Group, y = Number_fixation_min_mtu)) +
geom_boxplot(mapping = aes(fill = Group), outlier.shape = NA) +
geom_point(
size = 2,
alpha = 0.7,
position = position_jitter(
seed = 1,
width = 0.1,
height = 0.1
)
) +
ylim(0, 150) +
labs(x = "", y = "Number of fixations per minute") +
scale_fill_brewer(palette  = "RdBu") +
ggtitle("Number of fixations per minute\n(micro-teaching unit)") +
theme_cowplot() +
theme(legend.position = "none") -> plot_number_group
plot_number_group
##################### NUMBER OF FIXATIONS (AOI others) ########################
# filter group & total duration & number fixation (AOI others)
df_aoi %>%
filter(TOI == "Lesson") %>%
dplyr::select (
Group,
Duration_of_interval,
Participant,
"Total_duration_of_fixations.Board_Screen",
"Total_duration_of_fixations.Classroom_Others",
"Total_duration_of_fixations.Material_Students",
"Total_duration_of_fixations.Material_Teacher",
"Total_duration_of_fixations.Nametag_Anna",
"Total_duration_of_fixations.Nametag_Bianca",
"Total_duration_of_fixations.Nametag_Carl(a)",
"Number_of_fixations.Board_Screen",
"Number_of_fixations.Classroom_Others",
"Number_of_fixations.Material_Students",
"Number_of_fixations.Material_Teacher",
"Number_of_fixations.Nametag_Anna",
"Number_of_fixations.Nametag_Bianca",
"Number_of_fixations.Nametag_Carl(a)"
) %>%
rowwise() %>%
transmute(
Group = as_factor(Group),
Duration_of_interval_min = round(Duration_of_interval/60000, digits = 2),
Duration_of_interval_sec = round(Duration_of_interval/1000, digits = 2),
Participant = Participant,
Others_duration_fixation = sum(c_across(starts_with("Total_duration")), na.rm = TRUE),
Others_number_fixation = sum(c_across(starts_with("Number_of")), na.rm = TRUE),
Others_number_fixation_min = round(Others_number_fixation / Duration_of_interval_min, digits = 2),
Average_duration_others = round(Others_duration_fixation / Others_number_fixation, digits = 0)
) -> df_aoi_others
# N, M, SD, min & max number of fixations per minute (AOI students)
nof.min.others.table <-
df_aoi_others %>%
group_by(Group) %>%
summarise(
N = n(),
"M" = round(mean(Others_number_fixation_min), digits = 2),
"SD" = round(sd(Others_number_fixation_min), digits = 2),
"Min" = round(min(Others_number_fixation_min), digits = 2),
"Max" = round(max(Others_number_fixation_min), digits = 2)
)
knitr::kable(nof.min.others.table,
caption = "N, M, SD, min & max number of fixations per minute (AOI others)")
# plotting number of fixations per minute on AOI Students
df_aoi_others %>%
ggplot(mapping = aes(x = Group, y = Others_number_fixation_min)) +
geom_boxplot(mapping = aes(fill = Group), outlier.shape = NA) +
geom_point(
size = 2,
alpha = 0.7,
position = position_jitter(
seed = 1,
width = 0.1,
height = 0.005
)
) +
ylim(0, 100) +
labs(x = "", y = "Number of fixations per minute") +
scale_fill_brewer(palette  = "RdBu") +
ggtitle("Number of fixations per minute\n(AOI others)") +
theme_cowplot() +
theme(legend.position = "none") -> plot_number_min_others
plot_number_min_others
knitr::kable(nof.min.others.table,
caption = "N, M, SD, min & max number of fixations per minute (AOI others)")
# Filter and select necessary columns
df_aoi_filtered <- df_aoi %>%
filter(TOI == "Lesson") %>%
select(
Group,
Participant,
Duration_of_interval,
starts_with("Total_duration_of_fixations"),
starts_with("Number_of_fixations")
)
# Filter and select necessary columns
df_aoi_filtered <- df_aoi %>%
filter(TOI == "Lesson") %>%
select(
Group,
Participant,
Duration_of_interval,
starts_with("Total_duration_of_fixations"),
starts_with("Number_of_fixations")
)
# Create a new AOI 'Students' by summing durations and counts for Anna, Bianca, and Carl(a)
df_aoi_filtered <- df_aoi_filtered %>%
mutate(
Total_duration_of_fixations.Students =
`Total_duration_of_fixations.Anna` +
`Total_duration_of_fixations.Bianca` +
`Total_duration_of_fixations.Carl(a)`,
Number_of_fixations.Students =
`Number_of_fixations.Anna` +
`Number_of_fixations.Bianca` +
`Number_of_fixations.Carl(a)`,
# Calculate Average Duration for all AOIs, excluding "Disruptive_Person"
Total_duration_excl_disruptive = sum(c_across(starts_with("Total_duration_of_fixations"))[!names(c_across(starts_with("Total_duration_of_fixations"))) == "Total_duration_of_fixations.Disruptive_Person"], na.rm = TRUE),
Total_fixations_excl_disruptive = sum(c_across(starts_with("Number_of_fixations"))[!names(c_across(starts_with("Number_of_fixations"))) == "Number_of_fixations.Disruptive_Person"], na.rm = TRUE),
Average_duration_all = round(Total_duration_excl_disruptive / Total_fixations_excl_disruptive, digits = 2)  # Overall average duration
)
# Calculate average fixation duration for each AOI individually, excluding disruptive person
df_aoi_avg_long <- df_aoi_filtered %>%
pivot_longer(
cols = starts_with("Total_duration_of_fixations") | starts_with("Number_of_fixations"),
names_to = "Measure_AOI",
values_to = "Values"
) %>%
separate(Measure_AOI, into = c("Measure", "AOI"), sep = "\\.", extra = "merge") %>%
pivot_wider(
names_from = Measure,
values_from = Values
) %>%
filter(AOI != "Disruptive_Person") %>%
mutate(
Average_duration = round(Total_duration_of_fixations / Number_of_fixations, digits = 2)
)
# Set the order of AOIs based on the specified sequence
df_aoi_avg_long <- df_aoi_avg_long %>%
mutate(AOI = factor(AOI, levels = c(
"Students", "Anna", "Bianca", "Carl(a)", "Disruptive_person",
"Board_Screen", "Material_Teacher", "Material_Students",
"Classroom_Others", "Nametag_Anna", "Nametag_Bianca", "Nametag_Carl(a)"
))) %>%
arrange(AOI)
# Summarize descriptives for average duration of fixations
aois_descriptives_durations <- df_aoi_avg_long %>%
group_by(Group, AOI) %>%
summarise(
N = n(),
M = round(mean(Average_duration, na.rm = TRUE), 2),
SD = round(sd(Average_duration, na.rm = TRUE), 2),
Min = round(min(Average_duration, na.rm = TRUE), 2),
Max = round(max(Average_duration, na.rm = TRUE), 2)
)
# Summarize descriptives for average duration of fixations
aois_descriptives_durations <- df_aoi_avg_long %>%
group_by(Group, AOI) %>%
summarise(
N = n(),
M = round(mean(Average_duration, na.rm = TRUE), 2),
SD = round(sd(Average_duration, na.rm = TRUE), 2),
Min = round(min(Average_duration, na.rm = TRUE), 2),
Max = round(max(Average_duration, na.rm = TRUE), 2)
)
knitr::kable(aois_descriptives_durations,
caption = "N, M, SD, min & max duration of fixation per minute (across all AOIs)")
# Visualization: Boxplot for average duration of fixations across AOIs
ggplot(df_aoi_avg_long, aes(x = AOI, y = Average_duration, fill = Group)) +
geom_boxplot(outlier.shape = NA) +
geom_jitter(
position = position_jitterdodge(jitter.width = 0.15),
size = 1.5,
alpha = 0.7
) +
scale_fill_brewer(palette = "RdBu") +
labs(x = "AOI", y = "Average Duration of Fixations (ms)") +
ggtitle("Average Duration of Fixations across all AOIs") +
theme_minimal() +
theme(legend.position = "top", axis.text.x = element_text(angle = 45, hjust = 1))
##################### AVERAGE DURATION OF FIXATIONS (MICRO-TEACHING UNIT) ########################
# N, M, SD, min & max average duration of fixations (micro-teaching unit)
dur.table <-
df_aoi_sum %>%
group_by(Group) %>%
summarise(
N = n(),
"M in ms" = round(mean(Average_duration_mtu), digits = 2),
"SD in ms" = round(sd(Average_duration_mtu), digits = 2),
"Min in ms" = round(min(Average_duration_mtu), digits = 2),
"Max in ms" = round(max(Average_duration_mtu), digits = 2)
)
knitr::kable(dur.table,
caption = "N, M, SD, min & max duration of fixations in milliseconds (micro-teaching unit)")
# plotting average duration (micro-teaching unit)
df_aoi_sum %>%
ggplot(mapping = aes(x = Group,
y = Average_duration_mtu)) +
geom_boxplot(mapping = aes(fill = Group),
outlier.shape = NA) +
geom_point(size = 2,
alpha = 0.7,
position = position_jitter(seed = 1,
width = 0.1,
height = 0.1)) +
ylim(0, 1000) +
labs(x ="",
y = "Milliseconds") +
scale_fill_brewer(palette  = "RdBu") +
ggtitle("Average duration of fixations\n(micro-teaching unit)") +
theme_cowplot() +
theme(legend.position="none") -> plot_average_duration_group
plot_average_duration_group
# Visualization: Boxplot for average duration of fixations across AOIs
ggplot(df_aoi_avg_long, aes(x = AOI, y = Average_duration, fill = Group)) +
geom_boxplot(outlier.shape = NA) +
geom_jitter(
position = position_jitterdodge(jitter.width = 0.15),
size = 1.5,
alpha = 0.7
) +
ylim(0, 1000) +
scale_fill_brewer(palette = "RdBu") +
labs(x = "AOI", y = "Average Duration of Fixations (ms)") +
ggtitle("Average Duration of Fixations across all AOIs") +
theme_minimal() +
theme(legend.position = "top", axis.text.x = element_text(angle = 45, hjust = 1))
# Visualization: Boxplot for average duration of fixations across AOIs
ggplot(df_aoi_avg_long, aes(x = AOI, y = Average_duration, fill = Group)) +
geom_boxplot(outlier.shape = NA) +
geom_jitter(
position = position_jitterdodge(jitter.width = 0.15),
size = 1.5,
alpha = 0.7
) +
ylim(0, 1500) +
scale_fill_brewer(palette = "RdBu") +
labs(x = "AOI", y = "Average Duration of Fixations (ms)") +
ggtitle("Average Duration of Fixations across all AOIs") +
theme_minimal() +
theme(legend.position = "top", axis.text.x = element_text(angle = 45, hjust = 1))
